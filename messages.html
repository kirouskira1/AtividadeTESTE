<!DOCTYPE html>
<html class="light" lang="pt">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>Mensagens - Gerenciamento de Propriedades</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
  <script id="tailwind-config">tailwind.config = {darkMode: "class", theme: {extend: {colors: {primary: "#39E079", "background-light": "#f6f8f7", "background-dark": "#122017"}, fontFamily: {display: "Manrope"}, borderRadius: {DEFAULT: "0.25rem", lg: "0.5rem", xl: "0.75rem", full: "9999px"}}}};</script>
  <style>
    .material-symbols-outlined {
      font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
    }
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display">
  <div class="mobile-container relative w-[390px] min-h-[844px] mx-auto flex flex-col overflow-hidden rounded-2xl shadow-lg bg-background-light dark:bg-background-dark group/design-root">
    <!-- Top App Bar -->
    <div class="sticky top-0 z-10 flex flex-col bg-background-light dark:bg-background-dark shadow-sm">
      <div class="flex items-center p-4">
        <div class="flex size-12 shrink-0 items-center justify-start text-gray-800 dark:text-gray-200">
          <span class="material-symbols-outlined text-3xl cursor-pointer" onclick="navigateBack()">menu</span>
        </div>
        <h2 class="flex-1 text-center text-xl font-bold leading-tight tracking-[-0.015em] text-gray-900 dark:text-white">Mensagens</h2>
        <div class="flex w-12 items-center justify-end">
          <button class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 w-10 bg-transparent text-gray-800 dark:text-gray-200 hover:bg-primary/10 transition-colors duration-200" onclick="startNewChat()">
            <span class="material-symbols-outlined text-2xl">add_comment</span>
          </button>
        </div>
      </div>
      
      <!-- Search Bar -->
      <div class="px-4 pb-4">
        <label class="flex flex-col min-w-40 h-12 w-full">
          <div class="flex w-full flex-1 items-stretch rounded-xl h-full shadow-sm">
            <div class="text-gray-500 dark:text-gray-400 flex border-none bg-white dark:bg-background-dark items-center justify-center pl-4 rounded-l-xl border-r-0">
              <span class="material-symbols-outlined">search</span>
            </div>
            <input class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-gray-900 dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border-none bg-white dark:bg-background-dark h-full placeholder:text-gray-500 dark:placeholder:text-gray-400 px-4 rounded-l-none border-l-0 pl-2 text-base font-normal leading-normal" placeholder="Pesquisar por nome ou propriedade..." value="" onkeyup="searchConversations(this.value)"/>
          </div>
        </label>
      </div>
    </div>

    <!-- Conversation List -->
    <div class="flex-grow space-y-1 pb-4" id="conversationList">
      <!-- List Item with Unread Count -->
      <div class="flex items-center gap-4 bg-white dark:bg-background-dark px-4 min-h-[72px] py-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-white/5 transition-colors duration-200" onclick="openChat('joao-silva')">
        <div class="relative shrink-0">
          <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full h-14 w-14" style='background-image: url("https://trae-api-us.mchost.guru/api/ide/v1/text_to_image?prompt=Professional%20headshot%20portrait%20businessman%20smiling%20formal%20attire%20neutral%20background&image_size=square");'></div>
          <div class="absolute bottom-0 right-0 size-4 rounded-full bg-green-500 border-2 border-white dark:border-background-dark"></div>
        </div>
        <div class="flex flex-col justify-center flex-grow overflow-hidden">
          <p class="text-gray-900 dark:text-white text-base font-semibold leading-normal line-clamp-1 truncate">João Silva</p>
          <p class="text-gray-800 dark:text-gray-300 text-sm font-medium leading-normal line-clamp-1 truncate">Claro, estarei lá às 15h...</p>
        </div>
        <div class="shrink-0 flex flex-col items-end gap-1.5">
          <p class="text-gray-500 dark:text-gray-400 text-xs font-normal leading-normal">Agora</p>
          <div class="flex size-6 items-center justify-center rounded-full bg-primary text-white text-xs font-bold"><span>3</span></div>
        </div>
      </div>

      <!-- List Item with Active State -->
      <div class="flex items-center gap-4 bg-primary/10 dark:bg-primary/20 px-4 min-h-[72px] py-2 cursor-pointer" onclick="openChat('maria-fernandes')">
        <div class="relative shrink-0">
          <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full h-14 w-14" style='background-image: url("https://trae-api-us.mchost.guru/api/ide/v1/text_to_image?prompt=Professional%20headshot%20portrait%20businesswoman%20smiling%20formal%20attire%20neutral%20background&image_size=square");'></div>
        </div>
        <div class="flex flex-col justify-center flex-grow overflow-hidden">
          <p class="text-gray-900 dark:text-white text-base font-semibold leading-normal line-clamp-1 truncate">Maria Fernandes</p>
          <p class="text-primary dark:text-primary/90 text-sm font-medium leading-normal line-clamp-1 truncate">Recebeu a documentação?</p>
        </div>
        <div class="shrink-0 flex flex-col items-end gap-1.5">
          <p class="text-gray-500 dark:text-gray-400 text-xs font-normal leading-normal">5m</p>
          <div class="flex size-6 items-center justify-center rounded-full bg-primary text-white text-xs font-bold"><span>1</span></div>
        </div>
      </div>

      <!-- Standard List Item -->
      <div class="flex items-center gap-4 bg-white dark:bg-background-dark px-4 min-h-[72px] py-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-white/5 transition-colors duration-200" onclick="openChat('prop-liberdade')">
        <div class="relative shrink-0">
          <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full h-14 w-14" style='background-image: url("https://trae-api-us.mchost.guru/api/ide/v1/text_to_image?prompt=Modern%20apartment%20building%20facade%20glass%20windows%20urban%20architecture&image_size=square");'></div>
        </div>
        <div class="flex flex-col justify-center flex-grow overflow-hidden">
          <p class="text-gray-900 dark:text-white text-base font-semibold leading-normal line-clamp-1 truncate">Propriedade Av. Liberdade</p>
          <p class="text-gray-600 dark:text-gray-400 text-sm font-normal leading-normal line-clamp-1 truncate">Obrigado por confirmar.</p>
        </div>
        <div class="shrink-0">
          <p class="text-gray-500 dark:text-gray-400 text-xs font-normal leading-normal">Ontem</p>
        </div>
      </div>

      <!-- Standard List Item -->
      <div class="flex items-center gap-4 bg-white dark:bg-background-dark px-4 min-h-[72px] py-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-white/5 transition-colors duration-200" onclick="openChat('carlos-pereira')">
        <div class="relative shrink-0">
          <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full h-14 w-14" style='background-image: url("https://trae-api-us.mchost.guru/api/ide/v1/text_to_image?prompt=Professional%20headshot%20portrait%20man%20casual%20attire%20friendly%20smile%20neutral%20background&image_size=square");'></div>
        </div>
        <div class="flex flex-col justify-center flex-grow overflow-hidden">
          <p class="text-gray-900 dark:text-white text-base font-semibold leading-normal line-clamp-1 truncate">Carlos Pereira</p>
          <p class="text-gray-600 dark:text-gray-400 text-sm font-normal leading-normal line-clamp-1 truncate">Perfeito, aguardo o seu retorno.</p>
        </div>
        <div class="shrink-0">
          <p class="text-gray-500 dark:text-gray-400 text-xs font-normal leading-normal">28/07</p>
        </div>
      </div>

      <!-- Standard List Item -->
      <div class="flex items-center gap-4 bg-white dark:bg-background-dark px-4 min-h-[72px] py-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-white/5 transition-colors duration-200" onclick="openChat('sofia-costa')">
        <div class="relative shrink-0">
          <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full h-14 w-14" style='background-image: url("https://trae-api-us.mchost.guru/api/ide/v1/text_to_image?prompt=Professional%20headshot%20portrait%20woman%20elegant%20attire%20confident%20smile%20neutral%20background&image_size=square");'></div>
        </div>
        <div class="flex flex-col justify-center flex-grow overflow-hidden">
          <p class="text-gray-900 dark:text-white text-base font-semibold leading-normal line-clamp-1 truncate">Sofia Costa</p>
          <p class="text-gray-600 dark:text-gray-400 text-sm font-normal leading-normal line-clamp-1 truncate">A visita está agendada para amanhã.</p>
        </div>
        <div class="shrink-0">
          <p class="text-gray-500 dark:text-gray-400 text-xs font-normal leading-normal">27/07</p>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div class="flex flex-col items-center justify-center text-center p-10 mt-10 hidden" id="emptyState">
      <span class="material-symbols-outlined text-6xl text-gray-400 dark:text-gray-500">chat</span>
      <p class="mt-4 text-lg font-semibold text-gray-800 dark:text-gray-200">Nenhuma conversa encontrada</p>
      <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">Ainda não tem conversas. Inicie uma nova para começar!</p>
      <button class="mt-6 flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-bold text-white shadow-md hover:bg-primary/90 transition-colors" onclick="startNewChat()">
        <span class="material-symbols-outlined text-lg">add</span>
        Nova Conversa
      </button>
    </div>
    
    <!-- Bottom Navigation Bar -->
    <nav class="flex shrink-0 gap-2 border-t border-zinc-200 dark:border-zinc-800 bg-background-light dark:bg-background-dark px-4 pb-3 pt-2">
      <a class="flex flex-1 flex-col items-center justify-end gap-1 text-zinc-500 dark:text-zinc-400" href="home.html">
        <span class="material-symbols-outlined flex h-8 items-center justify-center">home</span>
        <p class="text-xs font-medium leading-normal tracking-[0.015em]">Início</p>
      </a>
      <a class="flex flex-1 flex-col items-center justify-end gap-1 text-zinc-500 dark:text-zinc-400" href="listings.html">
        <span class="material-symbols-outlined flex h-8 items-center justify-center">search</span>
        <p class="text-xs font-medium leading-normal tracking-[0.015em]">Busca</p>
      </a>
      <a class="flex flex-1 flex-col items-center justify-end gap-1 text-zinc-500 dark:text-zinc-400" href="favorites-swipe.html">
        <span class="material-symbols-outlined flex h-8 items-center justify-center">favorite</span>
        <p class="text-xs font-medium leading-normal tracking-[0.015em]">Salvos</p>
      </a>
      <a class="flex flex-1 flex-col items-center justify-end gap-1 text-primary dark:text-primary" href="messages.html">
        <span class="material-symbols-outlined fill flex h-8 items-center justify-center">chat_bubble</span>
        <p class="text-xs font-bold leading-normal tracking-[0.015em]">Chats</p>
      </a>
      <a class="flex flex-1 flex-col items-center justify-end gap-1 text-zinc-500 dark:text-zinc-400" href="#">
        <span class="material-symbols-outlined flex h-8 items-center justify-center">person</span>
        <p class="text-xs font-medium leading-normal tracking-[0.015em]">Perfil</p>
      </a>
    </nav>
  </div>

  <script>
    // Theme detection and setup
    function setupTheme() {
      const isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      document.documentElement.className = isDark ? 'dark' : 'light';
    }

    // Navigation functions
    function navigateBack() {
      window.history.back();
    }

    function openChat(chatId) {
      window.location.href = 'chat-detail.html';
    }

    function startNewChat() {
      // In a real app, this would open a contact selection screen
      alert('Iniciar nova conversa - funcionalidade em desenvolvimento');
    }

    function searchConversations(query) {
      const conversations = document.querySelectorAll('#conversationList > div');
      const emptyState = document.getElementById('emptyState');
      let visibleCount = 0;

      conversations.forEach(conversation => {
        const name = conversation.querySelector('p.font-semibold').textContent.toLowerCase();
        const message = conversation.querySelector('p.font-medium, p.font-normal').textContent.toLowerCase();
        
        if (name.includes(query.toLowerCase()) || message.includes(query.toLowerCase())) {
          conversation.style.display = 'flex';
          visibleCount++;
        } else {
          conversation.style.display = 'none';
        }
      });

      // Show/hide empty state
      if (visibleCount === 0 && query.trim() !== '') {
        emptyState.classList.remove('hidden');
      } else {
        emptyState.classList.add('hidden');
      }
    }

    // Initialize theme on load
    setupTheme();
    
    // Listen for theme changes
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', setupTheme);
  </script>
</body>
</html>